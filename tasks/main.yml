---
- name:       Check if JumpCloud folder exists
  stat:
    path:     "{{ jumpcloud_directory }}"
  register:   jumpcloud_directory_stat

- name:       Determine if JumpCloud is already installed
  set_fact:
    jc_not_installed: "{{ not (jumpcloud_directory_stat.stat.isdir is defined and jumpcloud_directory_stat.stat.isdir) }}"

- name:       Install JumpCloud if required
  include:    install.yml
  when:       jc_not_installed or jumpcloud_force_install

- name:       Determine if JumpCloud has been successfully installed
  set_fact:
    jc_is_installed: "{{ jumpcloud_directory_stat.stat.isdir is defined and jumpcloud_directory_stat.stat.isdir }}"

- name:       Tag System in JumpCloud
  include:    tag_system.yml
  when:       jc_is_installed
